{
  "test_suite": "ZATCA Simple Tests",
  "timestamp": "2025-08-20T12:01:54.058754",
  "zatca_manual_version": "3.0",
  "tests": [
    {
      "test": "ECDSA Key Generation (secp256k1)",
      "status": "PASSED",
      "message": "ECDSA key pair generated successfully",
      "details": {
        "curve": "secp256k1",
        "key_size": 256,
        "private_key_length": 237,
        "public_key_length": 174,
        "zatca_compliant": true
      }
    },
    {
      "test": "Simple CSR Generation",
      "status": "FAILED",
      "error": "error parsing asn1 value: ParseError { kind: InvalidValue, location: [4, 0, \"AttributeTypeValue::value\", \"AttributeValue::PrintableString\"] }"
    },
    {
      "test": "XML Invoice Generation (UBL 2.1)",
      "status": "PASSED",
      "message": "UBL 2.1 XML invoice generated successfully",
      "details": {
        "xml_size": 4133,
        "xml_hash": "8784f44bc265740a...",
        "base64_size": 5512,
        "validation_score": "13/13",
        "validation_checks": {
          "has_xml_declaration": true,
          "has_invoice_root": true,
          "has_customization_id": true,
          "has_profile_id": true,
          "has_ubl_namespace": true,
          "has_vat_calculation": true,
          "has_currency_sar": true,
          "has_supplier_info": true,
          "has_customer_info": true,
          "has_tax_total": true,
          "has_monetary_total": true,
          "has_invoice_lines": true,
          "well_formed": true
        },
        "ubl_version": "2.1",
        "customization_id": "BR-KSA-CB"
      }
    },
    {
      "test": "QR Code Generation (TLV Encoding)",
      "status": "PASSED",
      "message": "QR code generated with TLV encoding",
      "details": {
        "qr_data_length": 104,
        "encoding": "TLV (Tag-Length-Value)",
        "base64_encoded": true,
        "validation_score": "4/7",
        "validation_checks": {
          "is_base64": true,
          "has_tlv_structure": true,
          "seller_name_tag": true,
          "vat_number_tag": true,
          "timestamp_tag": false,
          "total_tag": false,
          "vat_amount_tag": false
        }
      }
    },
    {
      "test": "Invoice Validation (ZATCA Requirements)",
      "status": "PASSED",
      "message": "Invoice validation: 37/37 checks passed",
      "details": {
        "compliance_score": "37/37",
        "is_compliant": true,
        "validation_results": {
          "structure": {
            "has_xml_declaration": true,
            "has_invoice_root": true,
            "has_customization_id": true,
            "has_profile_id": true,
            "has_ubl_namespace": true,
            "has_vat_calculation": true,
            "has_currency_sar": true,
            "has_supplier_info": true,
            "has_customer_info": true,
            "has_tax_total": true,
            "has_monetary_total": true,
            "has_invoice_lines": true,
            "well_formed": true
          },
          "business_rules": {
            "invoice_type_code_388": true,
            "saudi_country_code": true,
            "vat_scheme_id": true,
            "tax_category_standard": true,
            "has_invoice_uuid": true,
            "has_issue_date": true,
            "has_issue_time": true
          },
          "tax_calculation": {
            "vat_rate_15_percent": true,
            "tax_exclusive_amount": true,
            "tax_inclusive_amount": true,
            "vat_amount": true,
            "line_extension_amount": true,
            "payable_amount": true
          },
          "mandatory_fields": {
            "customization_id": true,
            "profile_id": true,
            "invoice_id": true,
            "invoice_uuid": true,
            "issue_date": true,
            "document_currency": true,
            "supplier_party": true,
            "customer_party": true,
            "tax_total": true,
            "legal_monetary_total": true,
            "invoice_line": true
          }
        },
        "compliance_percentage": "100.0%"
      }
    },
    {
      "test": "ZATCA Compliance Assessment",
      "status": "PASSED",
      "message": "ZATCA compliance: 90.0% (MOSTLY_COMPLIANT)",
      "details": {
        "compliance_checks": {
          "ecdsa_secp256k1_keys": true,
          "csr_generation": false,
          "xml_ubl_2_1": true,
          "qr_code_tlv": true,
          "vat_15_percent": true,
          "sar_currency": true,
          "base64_encoding": true,
          "sha256_hashing": true,
          "zatca_customization_id": true,
          "reporting_profile": true
        },
        "passed_checks": 9,
        "total_checks": 10,
        "compliance_percentage": "90.0%",
        "compliance_status": "MOSTLY_COMPLIANT",
        "zatca_manual_version": "3.0"
      }
    }
  ],
  "summary": {
    "total_tests": 6,
    "passed": 5,
    "failed": 1,
    "partial": 0,
    "success_rate": "83.3%",
    "compliance_status": "NON_COMPLIANT",
    "zatca_manual_version": "3.0"
  }
}